# MATLAB 学习笔记

## 1. MATLAB 基本语法

### 1.1 变量

在 MATLAB 中，不需要预先声明变量。当你对一个变量赋值时，它会自动被创建。

```matlab
% 变量赋值
x = 10;
y = 'Hello, MATLAB!';
```

### 1.2 特殊预定义变量

MATLAB 中有一些已经定义好的特殊变量，可以直接使用。

- `pi`: 圆周率 π (≈ 3.14159)
- `i`, `j`: 虚数单位，即 -1 的平方根。例如 `3 + 4i`。
- `inf`: 无穷大 (Infinity)，例如 `1/0` 的结果。
- `nan`: 非数值 (Not-a-Number)，表示不确定的或未定义的结果，例如 `0/0`。
- `ans`: 默认变量，用于存储未赋值的表达式的最新计算结果。
- `eps`: 浮点数相对精度，是 MATLAB 能识别的最小的正数，即 `1.0` 和下一个更大的浮点数之间的差值。
- `clock`: 返回一个包含年、月、日、时、分、秒的 6 元素向量。
- `date`: 以字符串形式返回当前日期 (例如 '16-Sep-2025')。

**注意**：虽然可以像普通变量一样对它们重新赋值（例如 `pi = 3`），但这通常是不推荐的做法，因为它会覆盖掉内置的特殊值，可能导致计算错误。

### 1.3 矩阵和向量

MATLAB 是 "Matrix Laboratory" 的缩写，其核心数据结构是矩阵。

```matlab
% 创建一个行向量
row_vector = [1, 2, 3, 4, 5];

% 创建一个列向量
col_vector = [1; 2; 3; 4; 5];

% 创建一个 3x3 矩阵
matrix = [1, 2, 3; 4, 5, 6; 7, 8, 9];

% 访问矩阵元素 (第2行第3列)
element = matrix(2, 3); % 结果是 6

% 列向量和行向量的转换
transposed_vector = row_vector'; % 结果是一个列向量

% 矩阵的拼凑
new_matrix = [matrix; 10, 11, 12]; % 在矩阵下方添加一行

% 矩阵的存储：矩阵是一列一列存储，所以matrix(5)是第2列第2行的元素
```

### 1.3 多维数组与子数组

除了二维矩阵，MATLAB 还支持更高维度的数组。您可以将三维数组想象成一本由多个二维矩阵（页面）叠在一起的书。

`c(:,:,1) = [1,2,3;4,5,6]` 就是一个典型的例子：

- 这行代码创建了一个名为 `c` 的三维数组。
- `:` 表示选取该维度的所有元素。因此，第一个 `:` 代表所有行，第二个 `:` 代表所有列。
- `1` 代表第三个维度的索引。在这里，它指的是第一“页” (first page)。
- 所以，`c(:,:,1)` 精确地指向了三维数组 `c` 的第一页，并将一个 2x3 的矩阵 `[1,2,3;4,5,6]` 赋值给它。

**提取子数组 (Subarray)**

正如您提到的，这种语法也是提取子数组（或子矩阵）的关键。您可以像这样访问三维数组中的特定“页”：

```matlab
% 创建一个三维数组
c(:,:,1) = [1, 2, 3; 4, 5, 6]; % 第一页
c(:,:,2) = [7, 8, 9; 10, 11, 12]; % 第二页

% 提取第一页作为一个新的子数组
subarray1 = c(:,:,1); 
% subarray1 的值将是 [1, 2, 3; 4, 5, 6]

% 提取第二页的第一个行向量
sub_vector = c(1,:,2);
% sub_vector 的值将是 [7, 8, 9]
```

这种索引方式非常强大，让您可以灵活地操作和分析多维数据集。

### 1.4 基本运算符

- **算术运算符**: `+`, `-`, `*`, `/`, `^` (幂)
- **点运算符 (逐元素运算)**: `.*`, `./`, `.^`
- **关系运算符**: `==`, `~=`, `<`, `>`, `<=`, `>=`
- **逻辑运算符**: `&&` (与), `||` (或), `~` (非)

```matlab
A = [1, 2; 3, 4];
B = [5, 6; 7, 8];

% 矩阵乘法
C = A * B;

% 逐元素乘法
D = A .* B;
```
如果两个矩阵维度不同，会进行拓展，比如[1,0;2,1]+[3;2]会变成[1,0;2,1]+[3,2;3,2]，结果是[4,2;5,3]
### 1.4 控制流

#### if-else 语句

```matlab
x = 10;
if x > 0
    disp('x is positive');
elseif x < 0
    disp('x is negative');
else
    disp('x is zero');
end
```

#### for 循环

```matlab
for i = 1:5
    disp(i);
end
```

#### while 循环

```matlab
n = 1;
while n <= 5
    disp(n);
    n = n + 1;
end
```

## 2. MATLAB 常用函数

### 2.1 数学函数

- `sin(x)`, `cos(x)`, `tan(x)`: 三角函数
- `exp(x)`: 指数函数 e^x
- `log(x)`: 自然对数
- `log10(x)`: 以10为底的对数
- `sqrt(x)`: 平方根
- `abs(x)`: 绝对值
- `round(x)`, `floor(x)`, `ceil(x)`: 取整函数

### 2.2 矩阵操作函数

- `inv(A)`: 计算矩阵 A 的逆
- `det(A)`: 计算矩阵 A 的行列式
- `eig(A)`: 计算矩阵 A 的特征值和特征向量
- `size(A)`: 返回矩阵 A 的尺寸
- `length(v)`: 返回向量 v 的长度
- `zeros(m, n)`: 生成一个 m x n 的零矩阵
- `ones(m, n)`: 生成一个 m x n 的全一矩阵
- `eye(n)`: 生成一个 n x n 的单位矩阵
- `rand(m, n)`: 生成一个 m x n 的均匀分布随机矩阵

### 2.3 绘图函数

```matlab
% 绘制 y = sin(x)
x = 0:0.1:2*pi; % 生成从 0 到 2π 的 x 值，且步长为0.1
y = sin(x);

plot(x, y); % 绘制二维图形
xlabel('x'); % x轴标签
ylabel('sin(x)'); % y轴标签
title('Sine Wave'); % 图形标题
legend('sin(x)'); % 图例
grid on; % 显示网格

```

- `figure`: 创建一个新的图形窗口
- `hold on`/`hold off`: 在同一张图上绘制多条曲线
- `subplot(m,n,p)`: 将图形窗口分割成 m x n 个子图，并选择第 p 个

### 2.4 文件读写

- `save('data.mat', 'var1', 'var2')`: 将变量 `var1`, `var2` 保存到 `data.mat` 文件中
- `load('data.mat')`: 从 `data.mat` 文件中加载变量
- `xlsread('file.xlsx')`: 读取 Excel 文件
- `xlswrite('file.xlsx', A)`: 将矩阵 A 写入 Excel 文件

### 2.5 输入输出与转换函数

- `input('prompt')`: 在命令行显示 `prompt` 文本，并等待用户输入。
- `input('prompt', 's')`: 以字符串形式获取用户输入。
- `disp(X)`: 在命令行显示变量 `X` 的值，不显示变量名。
- `num2str(A)`: 将数值数组 `A` 转换为字符数组（字符串）。常用于将数字拼接到字符串中进行显示。
- `whos`: 显示当前工作区的所有变量及其信息。
- `fprintf(format, A, ...)`: 以指定格式输出数据，类似于 C 语言中的 `printf`。（但是fprintf不能显示复数，只有disp可以）

## 3. MATLAB 脚本与函数

### 3.1 脚本文件

脚本文件是一个包含一系列 MATLAB 命令的 `.m` 文件。在命令行中输入脚本名称即可执行。

```matlab
% my_script.m
a = 5;
b = 10;
c = a + b;
disp(c);
```

### 3.2 自定义函数

函数文件也是 `.m` 文件，但第一行必须是 `function` 关键字。文件名应与函数名相同。

```matlab
% add_numbers.m
function output = add_numbers(a, b)
    % 这个函数计算两个数的和
    output = a + b;
end
```

调用函数：

```matlab
result = add_numbers(5, 10); % result 将是 15
```
